@using Microsoft.EntityFrameworkCore.Metadata.Internal
@inherits LayoutComponentBase

<div class="container-fluid">
    <div class="row">
        <div class="col-3 gap-2">
            @foreach (var key in NavLinks.Keys)
            {
                <MultiNavLink class="btn btn-outline-primary"
                         href="@NavLinks[key]"
                         ActiveClass="btn-primary text-white"
                         DisabledClasses="btn btn-dark text-light disabled"
                         @ref="Refs[key]"
                         >
                    @key
                </MultiNavLink>
            }
            <button class="btn btn-secondary mt-5" @onclick="ToggleLinks">Toggle Links</button>
        </div>
        <div class="col">
            @Body
        </div>
    </div>
</div>

@code {

    public Dictionary<string, string[]> NavLinks = new()
    {
        { "People", new[] { "/people", "/" } },
        { "Departments", new[] { "/depts", "/departments" } },
        { "Details", new[] { "/person" } }
    };

    public Dictionary<string, MultiNavLink> Refs = new Dictionary<string, MultiNavLink>();

    private bool LinksEnabled = true;

    public void ToggleLinks()
    {
        LinksEnabled = !LinksEnabled;
        foreach (var link in Refs.Values)
        {
            link.SetEnabled(LinksEnabled);
        }
    }
}
